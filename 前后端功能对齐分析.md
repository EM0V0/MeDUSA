# MeDUSA å‰åç«¯åŠŸèƒ½å¯¹é½åˆ†æ

**åˆ†ææ—¶é—´**: 2025-11-14  
**ç›®çš„**: æ·±åº¦æ’æŸ¥å‰ç«¯å·²å®ç°ä½†åç«¯æœªå®ç°çš„åŠŸèƒ½

---

## ğŸ“Š æ€»ä½“è¯„ä¼°

### âœ… å·²å®Œå…¨å®ç°çš„åŠŸèƒ½
- âœ… ç”¨æˆ·æ³¨å†Œ (å¸¦å¯†ç å¼ºåº¦éªŒè¯)
- âœ… ç”¨æˆ·ç™»å½•
- âœ… ç”¨æˆ·ç™»å‡º
- âœ… Token åˆ·æ–°
- âœ… å¯†ç é‡ç½®
- âœ… é‚®ä»¶éªŒè¯ç å‘é€ (æ³¨å†Œ + å¯†ç é‡ç½®)
- âœ… å§¿æ€æ•°æ®ä¸Šä¼  (Poses)
- âœ… æ–‡ä»¶é¢„ç­¾åä¸Šä¼  (S3)
- âœ… ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢ (/me)
- âœ… JWT è®¤è¯ä¸­é—´ä»¶
- âœ… CORS é…ç½®
- âœ… AWS SES é‚®ä»¶å‘é€

### âš ï¸ éƒ¨åˆ†å®ç°çš„åŠŸèƒ½
- âš ï¸ æ‚£è€…ç®¡ç† (å‰ç«¯æœ‰å®Œæ•´ UIï¼Œåç«¯æ— ä¸“ç”¨ API)
- âš ï¸ ç”¨æˆ·è§’è‰²ç®¡ç† (å‰ç«¯æœ‰æƒé™æ§åˆ¶ï¼Œåç«¯ä»…å­˜å‚¨è§’è‰²)
- âš ï¸ å§¿æ€æ•°æ®æŸ¥è¯¢ (åç«¯æœ‰åŸºç¡€ APIï¼Œå‰ç«¯æœªå®Œå…¨å¯¹æ¥)

### âŒ å‰ç«¯æœ‰ä½†åç«¯ç¼ºå¤±çš„åŠŸèƒ½
- âŒ æ‚£è€… CRUD æ“ä½œ
- âŒ æ¶ˆæ¯ç³»ç»Ÿ
- âŒ æŠ¥å‘Šç”Ÿæˆå’Œç®¡ç†
- âŒ ç—‡çŠ¶è®°å½•
- âŒ è®¾ç½®ç®¡ç†
- âŒ ç”¨æˆ·èµ„æ–™æ›´æ–°
- âŒ ç®¡ç†å‘˜ç”¨æˆ·ç®¡ç†
- âŒ è®¾å¤‡ç®¡ç† API
- âŒ å®æ—¶æ•°æ®æ¨é€

---

## ğŸ” è¯¦ç»†åŠŸèƒ½å¯¹æ¯”

### 1. è®¤è¯ç³»ç»Ÿ (Auth) âœ… **å®Œå…¨å®ç°**

#### å‰ç«¯è°ƒç”¨
```dart
// lib/features/auth/data/datasources/auth_remote_data_source.dart
- POST /auth/login
- POST /auth/register
- POST /auth/logout
- POST /auth/refresh
- POST /auth/reset-password
```

#### åç«¯å®ç°
```python
# backend-py/main.py
âœ… POST /api/v1/auth/register
âœ… POST /api/v1/auth/login
âœ… POST /api/v1/auth/logout
âœ… POST /api/v1/auth/refresh
âœ… POST /api/v1/auth/reset-password
âœ… POST /api/v1/auth/send-verification-code
âœ… POST /api/v1/auth/send-password-reset-code
```

**çŠ¶æ€**: âœ… **å®Œå…¨å¯¹é½**

---

### 2. ç”¨æˆ·ä¿¡æ¯ (User Profile) âš ï¸ **éƒ¨åˆ†å®ç°**

#### å‰ç«¯éœ€æ±‚
```dart
// lib/features/profile/presentation/pages/profile_page.dart
- æŸ¥çœ‹ç”¨æˆ·èµ„æ–™
- ç¼–è¾‘ç”¨æˆ·èµ„æ–™ (å§“åã€é‚®ç®±ã€ç”µè¯ã€åœ°å€)
- æ›´æ”¹å¯†ç 
- ä¸Šä¼ å¤´åƒ
- æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
```

#### åç«¯å®ç°
```python
âœ… GET /api/v1/me  # æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯
âŒ PUT /api/v1/me  # æ›´æ–°ç”¨æˆ·ä¿¡æ¯ (ç¼ºå¤±)
âŒ PUT /api/v1/me/password  # æ›´æ”¹å¯†ç  (ç¼ºå¤±)
âŒ POST /api/v1/me/avatar  # ä¸Šä¼ å¤´åƒ (ç¼ºå¤±)
```

**ç¼ºå¤±åŠŸèƒ½**:
1. âŒ ç”¨æˆ·èµ„æ–™æ›´æ–° API
2. âŒ å¯†ç æ›´æ”¹ API (ä¸å¯†ç é‡ç½®ä¸åŒï¼Œéœ€è¦éªŒè¯æ—§å¯†ç )
3. âŒ å¤´åƒä¸Šä¼ å’Œç®¡ç†

---

### 3. æ‚£è€…ç®¡ç† (Patients) âŒ **ä¸¥é‡ç¼ºå¤±**

#### å‰ç«¯åŠŸèƒ½ (å®Œæ•´å®ç°)
```dart
// lib/features/patients/presentation/pages/patients_page.dart
- æ‚£è€…åˆ—è¡¨ (åˆ†é¡µã€æœç´¢ã€ç­›é€‰)
- æ·»åŠ æ‚£è€…
- ç¼–è¾‘æ‚£è€…ä¿¡æ¯
- åˆ é™¤æ‚£è€…
- æŸ¥çœ‹æ‚£è€…è¯¦æƒ…
- æ‰¹é‡æ“ä½œ (å¯¼å‡ºã€å‘é€æ¶ˆæ¯ã€åˆ é™¤)
- æ‚£è€…çŠ¶æ€ç®¡ç† (stable, moderate, critical)
```

#### åç«¯å®ç°
```python
âŒ GET /api/v1/patients  # è·å–æ‚£è€…åˆ—è¡¨ (ç¼ºå¤±)
âŒ POST /api/v1/patients  # åˆ›å»ºæ‚£è€… (ç¼ºå¤±)
âŒ GET /api/v1/patients/{patientId}  # è·å–æ‚£è€…è¯¦æƒ… (ç¼ºå¤±)
âŒ PUT /api/v1/patients/{patientId}  # æ›´æ–°æ‚£è€…ä¿¡æ¯ (ç¼ºå¤±)
âŒ DELETE /api/v1/patients/{patientId}  # åˆ é™¤æ‚£è€… (ç¼ºå¤±)
âœ… GET /api/v1/patients/{userId}/poses  # è·å–æ‚£è€…å§¿æ€æ•°æ® (å·²å®ç°)
```

**ç¼ºå¤±åŠŸèƒ½**:
1. âŒ æ‚£è€… CRUD å®Œæ•´ API
2. âŒ æ‚£è€…æœç´¢å’Œç­›é€‰
3. âŒ æ‚£è€…çŠ¶æ€ç®¡ç†
4. âŒ æ‚£è€…ç»Ÿè®¡ä¿¡æ¯
5. âŒ åŒ»ç”Ÿ-æ‚£è€…å…³è”å…³ç³»

**æ•°æ®æ¨¡å‹éœ€æ±‚**:
```python
# éœ€è¦åˆ›å»º Patient æ¨¡å‹
class Patient:
    id: str
    name: str
    age: int
    gender: str
    condition: str  # ç–¾ç—…ç±»å‹
    status: str  # stable, moderate, critical
    tremorScore: float
    phone: str
    email: str
    address: str
    doctorId: str  # å…³è”çš„åŒ»ç”Ÿ
    createdAt: datetime
    updatedAt: datetime
```

---

### 4. è®¾å¤‡ç®¡ç† (Devices) âŒ **å®Œå…¨ç¼ºå¤±**

#### å‰ç«¯åŠŸèƒ½
```dart
// lib/features/devices/presentation/pages/
- device_scan_page.dart  # è“ç‰™è®¾å¤‡æ‰«æ
- device_connection_page.dart  # è®¾å¤‡è¿æ¥å’Œæ•°æ®é‡‡é›†
- wifi_provision_page.dart  # WiFi é…ç½®
```

#### åç«¯éœ€æ±‚
```python
âŒ GET /api/v1/devices  # è·å–è®¾å¤‡åˆ—è¡¨ (ç¼ºå¤±)
âŒ POST /api/v1/devices  # æ³¨å†Œè®¾å¤‡ (ç¼ºå¤±)
âŒ GET /api/v1/devices/{deviceId}  # è·å–è®¾å¤‡è¯¦æƒ… (ç¼ºå¤±)
âŒ PUT /api/v1/devices/{deviceId}  # æ›´æ–°è®¾å¤‡ä¿¡æ¯ (ç¼ºå¤±)
âŒ DELETE /api/v1/devices/{deviceId}  # åˆ é™¤è®¾å¤‡ (ç¼ºå¤±)
âŒ POST /api/v1/devices/{deviceId}/bind  # ç»‘å®šè®¾å¤‡åˆ°æ‚£è€… (ç¼ºå¤±)
âŒ GET /api/v1/devices/{deviceId}/status  # è·å–è®¾å¤‡çŠ¶æ€ (ç¼ºå¤±)
```

**ç¼ºå¤±åŠŸèƒ½**:
1. âŒ è®¾å¤‡æ³¨å†Œå’Œç®¡ç†
2. âŒ è®¾å¤‡-æ‚£è€…ç»‘å®šå…³ç³»
3. âŒ è®¾å¤‡çŠ¶æ€ç›‘æ§
4. âŒ è®¾å¤‡é…ç½®ç®¡ç†

**æ•°æ®æ¨¡å‹éœ€æ±‚**:
```python
class Device:
    id: str
    name: str
    type: str  # è®¾å¤‡ç±»å‹
    macAddress: str
    firmwareVersion: str
    batteryLevel: int
    status: str  # online, offline, error
    patientId: str  # ç»‘å®šçš„æ‚£è€…
    lastSeen: datetime
    createdAt: datetime
```

---

### 5. å§¿æ€æ•°æ® (Poses) âš ï¸ **éƒ¨åˆ†å®ç°**

#### å‰ç«¯éœ€æ±‚
```dart
// å‰ç«¯ä¸»è¦é€šè¿‡è“ç‰™ç›´æ¥é‡‡é›†æ•°æ®ï¼Œç„¶åä¸Šä¼ 
- å®æ—¶æ•°æ®é‡‡é›† (é€šè¿‡è“ç‰™)
- æ•°æ®ä¸Šä¼ åˆ°äº‘ç«¯
- å†å²æ•°æ®æŸ¥è¯¢
- æ•°æ®å¯è§†åŒ–
```

#### åç«¯å®ç°
```python
âœ… GET /api/v1/poses?patientId={id}  # æŸ¥è¯¢æ‚£è€…å§¿æ€æ•°æ®
âœ… POST /api/v1/poses  # åˆ›å»ºå§¿æ€æ•°æ®
âœ… GET /api/v1/patients/{userId}/poses  # æŸ¥è¯¢ç”¨æˆ·å§¿æ€æ•°æ®
âŒ GET /api/v1/poses/{poseId}  # è·å–å•ä¸ªå§¿æ€æ•°æ® (æ ‡è®°ä¸º TODO)
âŒ DELETE /api/v1/poses/{poseId}  # åˆ é™¤å§¿æ€æ•°æ® (ç¼ºå¤±)
âŒ GET /api/v1/poses/statistics  # ç»Ÿè®¡åˆ†æ (ç¼ºå¤±)
```

**ç¼ºå¤±åŠŸèƒ½**:
1. âŒ å•ä¸ªå§¿æ€æ•°æ®æŸ¥è¯¢ (å·²æ ‡è®° TODO)
2. âŒ å§¿æ€æ•°æ®åˆ é™¤
3. âŒ æ•°æ®ç»Ÿè®¡å’Œåˆ†æ API
4. âŒ æ•°æ®å¯¼å‡ºåŠŸèƒ½

---

### 6. æŠ¥å‘Šç³»ç»Ÿ (Reports) âŒ **å®Œå…¨ç¼ºå¤±**

#### å‰ç«¯åŠŸèƒ½
```dart
// lib/features/reports/presentation/pages/reports_page.dart
- ç”ŸæˆæŠ¥å‘Š
- æŸ¥çœ‹æŠ¥å‘Šåˆ—è¡¨
- ä¸‹è½½æŠ¥å‘Š
- åˆ†äº«æŠ¥å‘Š
```

#### åç«¯å®ç°
```python
âŒ GET /api/v1/reports  # è·å–æŠ¥å‘Šåˆ—è¡¨ (ç¼ºå¤±)
âŒ POST /api/v1/reports  # ç”ŸæˆæŠ¥å‘Š (ç¼ºå¤±)
âŒ GET /api/v1/reports/{reportId}  # è·å–æŠ¥å‘Šè¯¦æƒ… (ç¼ºå¤±)
âŒ DELETE /api/v1/reports/{reportId}  # åˆ é™¤æŠ¥å‘Š (ç¼ºå¤±)
âŒ GET /api/v1/reports/{reportId}/download  # ä¸‹è½½æŠ¥å‘Š (ç¼ºå¤±)
```

**ç¼ºå¤±åŠŸèƒ½**:
1. âŒ æŠ¥å‘Šç”Ÿæˆå¼•æ“
2. âŒ æŠ¥å‘Šæ¨¡æ¿ç®¡ç†
3. âŒ æŠ¥å‘Š CRUD æ“ä½œ
4. âŒ æŠ¥å‘Šå¯¼å‡º (PDF/Excel)

**æ•°æ®æ¨¡å‹éœ€æ±‚**:
```python
class Report:
    id: str
    patientId: str
    doctorId: str
    title: str
    type: str  # daily, weekly, monthly
    startDate: datetime
    endDate: datetime
    content: dict  # JSON æ ¼å¼çš„æŠ¥å‘Šå†…å®¹
    fileKey: str  # S3 æ–‡ä»¶è·¯å¾„
    status: str  # draft, published
    createdAt: datetime
```

---

### 7. æ¶ˆæ¯ç³»ç»Ÿ (Messages) âŒ **å®Œå…¨ç¼ºå¤±**

#### å‰ç«¯åŠŸèƒ½
```dart
// lib/features/messages/presentation/pages/messages_page.dart
- å‘é€æ¶ˆæ¯
- æ¥æ”¶æ¶ˆæ¯
- æ¶ˆæ¯åˆ—è¡¨
- æœªè¯»æ¶ˆæ¯æé†’
```

#### åç«¯å®ç°
```python
âŒ GET /api/v1/messages  # è·å–æ¶ˆæ¯åˆ—è¡¨ (ç¼ºå¤±)
âŒ POST /api/v1/messages  # å‘é€æ¶ˆæ¯ (ç¼ºå¤±)
âŒ GET /api/v1/messages/{messageId}  # è·å–æ¶ˆæ¯è¯¦æƒ… (ç¼ºå¤±)
âŒ PUT /api/v1/messages/{messageId}/read  # æ ‡è®°å·²è¯» (ç¼ºå¤±)
âŒ DELETE /api/v1/messages/{messageId}  # åˆ é™¤æ¶ˆæ¯ (ç¼ºå¤±)
âŒ GET /api/v1/messages/unread/count  # æœªè¯»æ¶ˆæ¯æ•°é‡ (ç¼ºå¤±)
```

**ç¼ºå¤±åŠŸèƒ½**:
1. âŒ æ¶ˆæ¯ CRUD æ“ä½œ
2. âŒ å®æ—¶æ¶ˆæ¯æ¨é€ (WebSocket/SSE)
3. âŒ æ¶ˆæ¯å·²è¯»/æœªè¯»çŠ¶æ€
4. âŒ æ¶ˆæ¯é€šçŸ¥ç³»ç»Ÿ

**æ•°æ®æ¨¡å‹éœ€æ±‚**:
```python
class Message:
    id: str
    senderId: str
    receiverId: str
    subject: str
    content: str
    isRead: bool
    priority: str  # normal, high, urgent
    createdAt: datetime
    readAt: datetime
```

---

### 8. ç—‡çŠ¶è®°å½• (Symptoms) âŒ **å®Œå…¨ç¼ºå¤±**

#### å‰ç«¯åŠŸèƒ½
```dart
// lib/features/symptoms/presentation/pages/symptoms_page.dart
- è®°å½•ç—‡çŠ¶
- æŸ¥çœ‹ç—‡çŠ¶å†å²
- ç—‡çŠ¶è¶‹åŠ¿åˆ†æ
```

#### åç«¯å®ç°
```python
âŒ GET /api/v1/symptoms  # è·å–ç—‡çŠ¶åˆ—è¡¨ (ç¼ºå¤±)
âŒ POST /api/v1/symptoms  # è®°å½•ç—‡çŠ¶ (ç¼ºå¤±)
âŒ GET /api/v1/symptoms/{symptomId}  # è·å–ç—‡çŠ¶è¯¦æƒ… (ç¼ºå¤±)
âŒ PUT /api/v1/symptoms/{symptomId}  # æ›´æ–°ç—‡çŠ¶ (ç¼ºå¤±)
âŒ DELETE /api/v1/symptoms/{symptomId}  # åˆ é™¤ç—‡çŠ¶ (ç¼ºå¤±)
âŒ GET /api/v1/symptoms/statistics  # ç—‡çŠ¶ç»Ÿè®¡ (ç¼ºå¤±)
```

**ç¼ºå¤±åŠŸèƒ½**:
1. âŒ ç—‡çŠ¶è®°å½• CRUD
2. âŒ ç—‡çŠ¶åˆ†ç±»å’Œæ ‡ç­¾
3. âŒ ç—‡çŠ¶è¶‹åŠ¿åˆ†æ
4. âŒ ç—‡çŠ¶ä¸å§¿æ€æ•°æ®å…³è”

**æ•°æ®æ¨¡å‹éœ€æ±‚**:
```python
class Symptom:
    id: str
    patientId: str
    type: str  # tremor, rigidity, bradykinesia
    severity: int  # 1-10
    description: str
    duration: int  # æŒç»­æ—¶é—´ (åˆ†é’Ÿ)
    triggers: list[str]  # è§¦å‘å› ç´ 
    recordedAt: datetime
    createdAt: datetime
```

---

### 9. è®¾ç½®ç®¡ç† (Settings) âŒ **å®Œå…¨ç¼ºå¤±**

#### å‰ç«¯åŠŸèƒ½
```dart
// lib/features/settings/presentation/pages/settings_page.dart
- åº”ç”¨è®¾ç½®
- é€šçŸ¥è®¾ç½®
- éšç§è®¾ç½®
- æ•°æ®åŒæ­¥è®¾ç½®
```

#### åç«¯å®ç°
```python
âŒ GET /api/v1/settings  # è·å–ç”¨æˆ·è®¾ç½® (ç¼ºå¤±)
âŒ PUT /api/v1/settings  # æ›´æ–°è®¾ç½® (ç¼ºå¤±)
âŒ GET /api/v1/settings/notifications  # é€šçŸ¥è®¾ç½® (ç¼ºå¤±)
âŒ PUT /api/v1/settings/notifications  # æ›´æ–°é€šçŸ¥è®¾ç½® (ç¼ºå¤±)
```

**ç¼ºå¤±åŠŸèƒ½**:
1. âŒ ç”¨æˆ·åå¥½è®¾ç½®
2. âŒ é€šçŸ¥é…ç½®
3. âŒ éšç§è®¾ç½®
4. âŒ æ•°æ®åŒæ­¥é…ç½®

---

### 10. ç®¡ç†å‘˜åŠŸèƒ½ (Admin) âŒ **å®Œå…¨ç¼ºå¤±**

#### å‰ç«¯åŠŸèƒ½
```dart
// lib/features/admin/presentation/pages/user_management_page.dart
- ç”¨æˆ·ç®¡ç†
- è§’è‰²åˆ†é…
- ç³»ç»Ÿç›‘æ§
- æ—¥å¿—æŸ¥çœ‹
```

#### åç«¯å®ç°
```python
âœ… GET /api/v1/admin/health  # å¥åº·æ£€æŸ¥
âŒ GET /api/v1/admin/users  # è·å–æ‰€æœ‰ç”¨æˆ· (ç¼ºå¤±)
âŒ PUT /api/v1/admin/users/{userId}/role  # ä¿®æ”¹ç”¨æˆ·è§’è‰² (ç¼ºå¤±)
âŒ DELETE /api/v1/admin/users/{userId}  # åˆ é™¤ç”¨æˆ· (ç¼ºå¤±)
âŒ GET /api/v1/admin/logs  # æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿— (ç¼ºå¤±)
âŒ GET /api/v1/admin/statistics  # ç³»ç»Ÿç»Ÿè®¡ (ç¼ºå¤±)
```

**ç¼ºå¤±åŠŸèƒ½**:
1. âŒ ç”¨æˆ·ç®¡ç† CRUD
2. âŒ è§’è‰²å’Œæƒé™ç®¡ç†
3. âŒ ç³»ç»Ÿæ—¥å¿—æŸ¥è¯¢
4. âŒ ç³»ç»Ÿç»Ÿè®¡å’Œç›‘æ§

---

## ğŸ“‹ ä¼˜å…ˆçº§å»ºè®®

### ğŸ”´ é«˜ä¼˜å…ˆçº§ (æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½)

#### 1. æ‚£è€…ç®¡ç† API â­â­â­â­â­
**åŸå› **: å‰ç«¯å·²æœ‰å®Œæ•´ UIï¼Œæ˜¯åŒ»ç”Ÿç«¯æ ¸å¿ƒåŠŸèƒ½

**éœ€è¦å®ç°**:
```python
POST   /api/v1/patients          # åˆ›å»ºæ‚£è€…
GET    /api/v1/patients          # è·å–æ‚£è€…åˆ—è¡¨ (æ”¯æŒæœç´¢ã€ç­›é€‰ã€åˆ†é¡µ)
GET    /api/v1/patients/{id}     # è·å–æ‚£è€…è¯¦æƒ…
PUT    /api/v1/patients/{id}     # æ›´æ–°æ‚£è€…ä¿¡æ¯
DELETE /api/v1/patients/{id}     # åˆ é™¤æ‚£è€…
GET    /api/v1/patients/statistics  # æ‚£è€…ç»Ÿè®¡
```

**æ•°æ®åº“è¡¨**:
- `medusa-patients-prod` (DynamoDB)
- ä¸»é”®: `id` (HASH)
- GSI: `doctorId-createdAt-index` (åŒ»ç”ŸæŸ¥è¯¢æ‚£è€…)
- GSI: `status-index` (æŒ‰çŠ¶æ€ç­›é€‰)

**å·¥ä½œé‡**: 2-3 å¤©

---

#### 2. ç”¨æˆ·èµ„æ–™æ›´æ–° API â­â­â­â­
**åŸå› **: ç”¨æˆ·éœ€è¦èƒ½å¤Ÿç¼–è¾‘ä¸ªäººä¿¡æ¯

**éœ€è¦å®ç°**:
```python
PUT /api/v1/me                   # æ›´æ–°ç”¨æˆ·èµ„æ–™
PUT /api/v1/me/password          # æ›´æ”¹å¯†ç  (éœ€éªŒè¯æ—§å¯†ç )
POST /api/v1/me/avatar           # ä¸Šä¼ å¤´åƒ
```

**å·¥ä½œé‡**: 1 å¤©

---

#### 3. è®¾å¤‡ç®¡ç† API â­â­â­â­
**åŸå› **: éœ€è¦è¿½è¸ªè®¾å¤‡å’Œæ‚£è€…çš„ç»‘å®šå…³ç³»

**éœ€è¦å®ç°**:
```python
POST   /api/v1/devices           # æ³¨å†Œè®¾å¤‡
GET    /api/v1/devices           # è·å–è®¾å¤‡åˆ—è¡¨
GET    /api/v1/devices/{id}      # è·å–è®¾å¤‡è¯¦æƒ…
PUT    /api/v1/devices/{id}      # æ›´æ–°è®¾å¤‡ä¿¡æ¯
POST   /api/v1/devices/{id}/bind # ç»‘å®šè®¾å¤‡åˆ°æ‚£è€…
DELETE /api/v1/devices/{id}/bind # è§£ç»‘è®¾å¤‡
```

**æ•°æ®åº“è¡¨**:
- `medusa-devices-prod` (DynamoDB)
- ä¸»é”®: `id` (HASH)
- GSI: `patientId-index` (æŸ¥è¯¢æ‚£è€…è®¾å¤‡)
- GSI: `macAddress-index` (é€šè¿‡ MAC åœ°å€æŸ¥è¯¢)

**å·¥ä½œé‡**: 2 å¤©

---

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ (å¢å¼ºåŠŸèƒ½)

#### 4. æŠ¥å‘Šç³»ç»Ÿ â­â­â­
**éœ€è¦å®ç°**:
```python
POST   /api/v1/reports           # ç”ŸæˆæŠ¥å‘Š
GET    /api/v1/reports           # è·å–æŠ¥å‘Šåˆ—è¡¨
GET    /api/v1/reports/{id}      # è·å–æŠ¥å‘Šè¯¦æƒ…
GET    /api/v1/reports/{id}/download  # ä¸‹è½½æŠ¥å‘Š
DELETE /api/v1/reports/{id}      # åˆ é™¤æŠ¥å‘Š
```

**å·¥ä½œé‡**: 3-4 å¤© (åŒ…æ‹¬æŠ¥å‘Šç”Ÿæˆé€»è¾‘)

---

#### 5. ç—‡çŠ¶è®°å½• API â­â­â­
**éœ€è¦å®ç°**:
```python
POST   /api/v1/symptoms          # è®°å½•ç—‡çŠ¶
GET    /api/v1/symptoms          # è·å–ç—‡çŠ¶åˆ—è¡¨
GET    /api/v1/symptoms/{id}     # è·å–ç—‡çŠ¶è¯¦æƒ…
PUT    /api/v1/symptoms/{id}     # æ›´æ–°ç—‡çŠ¶
DELETE /api/v1/symptoms/{id}     # åˆ é™¤ç—‡çŠ¶
```

**å·¥ä½œé‡**: 2 å¤©

---

#### 6. æ¶ˆæ¯ç³»ç»Ÿ â­â­â­
**éœ€è¦å®ç°**:
```python
POST   /api/v1/messages          # å‘é€æ¶ˆæ¯
GET    /api/v1/messages          # è·å–æ¶ˆæ¯åˆ—è¡¨
GET    /api/v1/messages/{id}     # è·å–æ¶ˆæ¯è¯¦æƒ…
PUT    /api/v1/messages/{id}/read  # æ ‡è®°å·²è¯»
DELETE /api/v1/messages/{id}     # åˆ é™¤æ¶ˆæ¯
```

**å·¥ä½œé‡**: 2-3 å¤©

---

### ğŸŸ¢ ä½ä¼˜å…ˆçº§ (ç®¡ç†åŠŸèƒ½)

#### 7. ç®¡ç†å‘˜åŠŸèƒ½ â­â­
**éœ€è¦å®ç°**:
```python
GET    /api/v1/admin/users       # è·å–æ‰€æœ‰ç”¨æˆ·
PUT    /api/v1/admin/users/{id}/role  # ä¿®æ”¹ç”¨æˆ·è§’è‰²
DELETE /api/v1/admin/users/{id}  # åˆ é™¤ç”¨æˆ·
GET    /api/v1/admin/statistics  # ç³»ç»Ÿç»Ÿè®¡
```

**å·¥ä½œé‡**: 2 å¤©

---

#### 8. è®¾ç½®ç®¡ç† â­
**éœ€è¦å®ç°**:
```python
GET /api/v1/settings             # è·å–ç”¨æˆ·è®¾ç½®
PUT /api/v1/settings             # æ›´æ–°è®¾ç½®
```

**å·¥ä½œé‡**: 1 å¤©

---

## ğŸ“ˆ å®ç°è·¯çº¿å›¾

### Phase 1: æ ¸å¿ƒåŠŸèƒ½ (1-2 å‘¨)
1. âœ… æ‚£è€…ç®¡ç† API (3 å¤©)
2. âœ… ç”¨æˆ·èµ„æ–™æ›´æ–° API (1 å¤©)
3. âœ… è®¾å¤‡ç®¡ç† API (2 å¤©)
4. âœ… å®Œå–„å§¿æ€æ•°æ® API (1 å¤©)

**é¢„è®¡**: 7 ä¸ªå·¥ä½œæ—¥

---

### Phase 2: å¢å¼ºåŠŸèƒ½ (2-3 å‘¨)
1. âœ… æŠ¥å‘Šç³»ç»Ÿ (4 å¤©)
2. âœ… ç—‡çŠ¶è®°å½• API (2 å¤©)
3. âœ… æ¶ˆæ¯ç³»ç»Ÿ (3 å¤©)

**é¢„è®¡**: 9 ä¸ªå·¥ä½œæ—¥

---

### Phase 3: ç®¡ç†åŠŸèƒ½ (1 å‘¨)
1. âœ… ç®¡ç†å‘˜åŠŸèƒ½ (2 å¤©)
2. âœ… è®¾ç½®ç®¡ç† (1 å¤©)
3. âœ… ç³»ç»Ÿä¼˜åŒ–å’Œæµ‹è¯• (2 å¤©)

**é¢„è®¡**: 5 ä¸ªå·¥ä½œæ—¥

---

## ğŸ¯ æ€»ç»“

### ç»Ÿè®¡æ•°æ®
- **å®Œå…¨å®ç°**: 8 ä¸ªç«¯ç‚¹ (è®¤è¯ç›¸å…³)
- **éƒ¨åˆ†å®ç°**: 4 ä¸ªç«¯ç‚¹ (ç”¨æˆ·ä¿¡æ¯ã€å§¿æ€æ•°æ®)
- **å®Œå…¨ç¼ºå¤±**: çº¦ 50+ ä¸ªç«¯ç‚¹

### å…³é”®ç¼ºå¤±
1. âŒ **æ‚£è€…ç®¡ç†** - å‰ç«¯å·²æœ‰å®Œæ•´ UIï¼Œåç«¯å®Œå…¨ç¼ºå¤±
2. âŒ **è®¾å¤‡ç®¡ç†** - è®¾å¤‡ç»‘å®šå’ŒçŠ¶æ€è¿½è¸ªç¼ºå¤±
3. âŒ **æŠ¥å‘Šç³»ç»Ÿ** - æŠ¥å‘Šç”Ÿæˆå’Œç®¡ç†ç¼ºå¤±
4. âŒ **æ¶ˆæ¯ç³»ç»Ÿ** - åŒ»æ‚£æ²Ÿé€šåŠŸèƒ½ç¼ºå¤±
5. âŒ **ç—‡çŠ¶è®°å½•** - ç—‡çŠ¶è¿½è¸ªåŠŸèƒ½ç¼ºå¤±

### å»ºè®®
**ç«‹å³å¼€å§‹å®ç° Phase 1 çš„æ ¸å¿ƒåŠŸèƒ½**ï¼Œè¿™äº›æ˜¯å‰ç«¯å·²æœ‰ UI ä¸”ç”¨æˆ·ä½“éªŒä¾èµ–çš„å…³é”®åŠŸèƒ½ã€‚

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### é€‰é¡¹ A: å¿«é€ŸåŸå‹ (æ¨è)
**ç›®æ ‡**: 1 å‘¨å†…å®ç°æ‚£è€…ç®¡ç†å’Œç”¨æˆ·èµ„æ–™æ›´æ–°

1. åˆ›å»º `medusa-patients-prod` DynamoDB è¡¨
2. å®ç°æ‚£è€… CRUD API
3. å®ç°ç”¨æˆ·èµ„æ–™æ›´æ–° API
4. å‰åç«¯è”è°ƒæµ‹è¯•

### é€‰é¡¹ B: å®Œæ•´å®ç°
**ç›®æ ‡**: 3-4 å‘¨å†…å®ç°æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½

æŒ‰ç…§ä¸Šè¿°è·¯çº¿å›¾é€æ­¥å®ç° Phase 1-3 çš„æ‰€æœ‰åŠŸèƒ½ã€‚

### é€‰é¡¹ C: æœ€å°å¯ç”¨äº§å“ (MVP)
**ç›®æ ‡**: 3 å¤©å†…å®ç°æœ€åŸºç¡€åŠŸèƒ½

ä»…å®ç°ï¼š
1. æ‚£è€…åˆ—è¡¨æŸ¥è¯¢
2. æ‚£è€…åˆ›å»º
3. æ‚£è€…è¯¦æƒ…æŸ¥è¯¢

---

**ä½ å¸Œæœ›ä»å“ªä¸ªå¼€å§‹ï¼Ÿæˆ‘å¯ä»¥ç«‹å³å¼€å§‹å®ç°ï¼** ğŸš€

